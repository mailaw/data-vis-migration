<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">

  <title>Bird Migration</title>
  <meta name="description" content="A3 Visualizer">
  <meta name="author" content="Mailiis Law">

  <!-- Bootstrap CSS stylesheet-->
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ"
    crossorigin="anonymous" rel="stylesheet">

  <!-- Custom styles -->
  <link href="css/styles.css" rel="stylesheet">
  <link href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css" rel="stylesheet">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
  <!--bootstrap js-->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

  <!--Table-->
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>

  <!-- Plotly.js -->
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <!-- Map>
    <script src="https://www.amcharts.com/lib/3/ammap.js"></script>
    <script src="https://www.amcharts.com/lib/3/maps/js/usaLow.js"></script>
    <script src="https://www.amcharts.com/lib/3/plugins/export/export.min.js"></script>
    <link rel="stylesheet" href="https://www.amcharts.com/lib/3/plugins/export/export.css" type="text/css" media="all" />
    <script src="https://www.amcharts.com/lib/3/themes/dark.js"></script>
    <script src="/js/map.js"></script-->


</head>

<body>
  <div class="row header-container" id="la-header"></div>
  <div class="article-body">
    <div class="row border-bottom">
      <h1>Snowy Owl's spread across the nation </h1>
    </div>
    <div id="main-pic">
      <img src="assets/Screen%20Shot%202017-11-09%20at%207.14.15%20AM.png">
      <h4>A snowy owl sits in a tundra-like environment, one they are often drawn to. (Photo: Gary Bendig/Unsplash)</h4>
    </div>
    <div id="bioline">
      By Mailiis Law
    </div>
    <div class="row article-text">
      <p>Snowy owls are well known for their iconic look and even their cameo in Harry Potter. But what do scientists
        actually know about these mysterious birds? They mostly stay in the Arctic Circle, hunting animals on the
        tundra. They typically stay far in the north, with only a special handful popping up in the United
        States--sending birders flocking to get a look. But that has started to change in recent years.</p>

      <p>Snowy owls made their way all around the region in the autumn. They came down from the north and even into
        southern states. They were found on the beaches of North Carolina and even Florida. People joked that they were
        attracted to the sandy beaches for their resemblance to the tundra.</p>

      <p>This is considered a phenonomen that is once in a lifetime. Scientists speculate it is likely due to the boom
        in population of lemmings. When snowy owls have an abundance of food, they grow strong and fat enough to fly
        further down south. This "irruption" is the largest ecologists have seen in 40 to 50 years. </p>

      <p>The greatest irruption in the past few years begain in 2014. After that, it can be observed that the United
        States became much more vistied by Snowy Owls. </p>
      <p>Below you can view visualizations of reported sightings of Snowy Owls in different time frames. The months are
        indicated to give an idea of the movement over time. The visualization offers longitudal and latitudal
        information, along with indication of warmer months represented by red. </p>
    </div>
    <div class="row">
      <div class="col-md-3">
        <div class="profile-container center-content">
          <h2>Snowy Owl</h2>
          <h2>Bubo Scandiacus</h2>
          <img src="assets/snowyProfile.jpg">
          <h3>"The regal Snowy Owl is one of the few birds that can get even non-birders to come out for a look. This
            largest (by weight) North American owl shows up irregularly in winter to hunt in windswept fields or dunes,
            a pale shape with catlike yellow eyes. They spend summers far north of the Arctic Circle hunting lemmings,
            ptarmigan, and other prey in 24-hour daylight.-" All About Birds, Cornell Lab of Ornithology</h3>
        </div>
      </div>
      <div class="col-md-9 col-sm-4">
        <!--div id="chartdiv"></div-->
        <!--div id="mapDiv"></div-->
        <div id="pointDiv"></div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-3 col-sm-4">
        <div class="side-text">
          <p> The migration of snowy owls is along the southern border of Canda. Such irruptions of snowy owls in areas
            outside of southern Canada are usually seen in only a few northern states on the East or West Coast.</p>

          <p>The data shows that after the initial erruption between 2013 and 2014, the population density of snowy
            owls in the US is significantly larger. </p>
        </div>
      </div>
      <div class="col-md-9 col-sm-4">
        <div id="pointDiv2"></div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-4">
        <div class="article-img">
          <img src="assets/Screen%20Shot%202017-11-09%20at%207.15.05%20AM.png">
          <h4>Photo by Jakob Puff on Unsplash</h4>
        </div>
      </div>
      <div class="col-md-8">
        <div class="container right-text">
          <p>Below you can view the data table that was used to make the visualizations above. All of the data was
            collected through a collective citizen science effort, with the data managed by the Cornell Lab of
            Ornithology. The following dataset was granted by the Cornell Lab of Ornithology. Visit <a href="ebird.org">ebird.org</a>
            to see more data and submit your own observations. The data in this article relies on the citizens who
            reported their sightings, and the integrity of their recordings. </p>
        </div>
      </div>

    </div>

    <!--div class="row">
                <div id="buntingChoro" style="width:800px; height:600px;"></div>
              </div-->


    <div class="row">
      <div class="col-md-12 col-sm-4">
        <table id="snowyTable" class="display" cellspacing="0" width="100%">
          <thead>
            <tr>
              <th>COMMON NAME</th>
              <th>OBSERVATION COUNT</th>
              <th>STATE</th>
              <th>LATITUDE</th>
              <th>LONGITUDE</th>
              <th>OBSERVATION DATE</th>
            </tr>
          </thead>
          <tfoot>
            <tr>
              <th>COMMON NAME</th>
              <th>OBSERVATION COUNT</th>
              <th>STATE</th>
              <th>LATITUDE</th>
              <th>LONGITUDE</th>
              <th>OBSERVATION DATE</th>
            </tr>
          </tfoot>
        </table>
      </div>
    </div>
  </div>
  <!--scripts at bottom to load faster-->
  <script src="js/scripts.js"></script>



  <!--map heat -->
  <script> /*
      
        Plotly.d3.csv('https://raw.githubusercontent.com/mailaw/data-vis-migration/master/data/pabuTotals10-11.csv', function(err, rows){
          function unpack(rows, key) {
              return rows.map(function(row) { return row[key]; });
          }

        var data = [{
                  type: 'choropleth',
                  locationmode: 'USA-states',
                  locations: unpack(rows, 'CODE'),
                  z: unpack(rows, 'TOTAL'),
                  text: unpack(rows, 'code'),
                  zmin: 0,
                  zmax: 80,
                  colorscale: [
                    [0, 'rgb(242,240,247)'], [0.2, 'rgb(218,218,235)'],
                    [0.4, 'rgb(188,189,220)'], [0.6, 'rgb(158,154,200)'],
                    [0.8, 'rgb(117,107,177)'], [1, 'rgb(84,39,143)']
                  ],
                colorbar: {
                  title: 'Number of observed buntings',
                  thickness: 0.2
                },
                marker: {
                  line:{
                    color: 'rgb(255,255,255)',
                    width: 2
                  }
                }
              }];

        console.log(data.locations);
          var layout = {
                  title: '2010-2011 Bunting Sightings',
                  geo:{
                    scope: 'usa',
                    showlakes: true,
                    lakecolor: 'rgb(255,255,255)'
                  }
              };
              Plotly.plot(buntingChoro, data, layout, {showLink: false});
          }); */
  </script>

  <script>
        /*Plotly.d3.csv('https://raw.githubusercontent.com/mailaw/data-vis-migration/master/data/snowyowlData.csv', function(err, rows){
          function unpack(rows, key) {
            return rows.map(function(row) { return row[key]; });}

          function getMaxOfArray(numArray) {
            return Math.max.apply(null, numArray);
          }

           var data = [];
           var count = unpack(rows, 'OBSERVATION COUNT');
           var startLongitude = unpack(rows, 'LATITUDE');
           var endLongitude = unpack(rows, 'LONGITUDE');
           var startLat = unpack(rows, 'start_lat');
           var endLat = unpack(rows, 'end_lat');

           for ( var i = 0 ; i < count.length; i++ ) {
             var opacityValue = count[i]/getMaxOfArray(count);
             var result2 = {
              type: 'scattergeo',
              locationmode: 'USA-states',
              lon: [ startLongitude[i] , endLongitude[i] ],
              lat: [ startLat[i] , endLat[i] ],
              mode: 'lines',
              line: {
                width: 1,
                color: 'red'
              },
            opacity: opacityValue
            };
            data.push(result2);

           };

        var layout = {
              title: 'Feb. 2011 American Airline flight paths',
              showlegend: false,
              geo:{
                scope: 'north america',
                projection: {
                  type: 'azimuthal equal area'
                },
                showland: true,
                landcolor: 'rgb(243,243,243)',
                countrycolor: 'rgb(204,204,204)'
              }
            };

        Plotly.plot(mapDiv, data, layout, {showLink: false});
        });*/
  </script>


  <!--point map-->
  <script>
    Plotly.d3.csv('https://raw.githubusercontent.com/mailaw/data-vis-migration/master/data/snowyowlData14-17.csv', function (err, rows) {
      function unpack(rows, key) {
        return rows.map(function (row) { return row[key]; });
      }

      //scl = [[0, 'rgb(0, 25, 255)'],[0.25,'rgb(0, 152, 255)'],[0.5,'rgb(255, 0, 0)'],[0.75,'rgb(255,51,153)'],[1,'rgb(102,102,255)']];
      scl = [[0, 'rgb(85,133,181)'], [0.25, 'rgb(85,133,181)'], [0.5, 'rgb(227, 39, 63)'], [0.75, 'rgb(227, 39, 63)'], [1, 'rgb(85,133,181)']];
      console.log(unpack(rows, 'MONTH'));

      var data = [{
        type: 'scattergeo',
        mode: 'markers',
        text: unpack(rows, 'MONTH'),
        lon: unpack(rows, 'LONGITUDE'),
        lat: unpack(rows, 'LATITUDE'),
        marker: {
          color: unpack(rows, 'MONTH'),
          colorscale: scl,
          cmin: 1,
          cmax: 12,
          reversescale: true,
          opacity: 0.1,
          size: 5,
          colorbar: {
            thickness: 10,
            titleside: 'right',
            outlinecolor: 'rgba(68,68,68,0)',
            ticks: 'outside',
            ticklen: 3, //3
            shoticksuffix: 'last',
            ticksuffix: 'months',
            dtick: 1 //0.1
          }
        },
        name: 'Snowy Owl Data'
      }];

      var layout = {
        geo: {
          scope: 'north america',
          showland: true,
          landcolor: 'rgb(241,241,229)', //212,212,212
          subunitcolor: 'rgb(234,236,223)', //255,255,255
          countrycolor: 'rgb(255,255,255)',
          showlakes: true,
          lakecolor: 'rgb(216,231,231)', //255,255,255
          showsubunits: true,
          showcountries: true,
          resolution: 50,
          projection: {
            type: 'conic conformal',
            rotation: {
              long: -50
            }
          },
          lonaxis: {
            showgrid: false,
            gridwidth: 0.5,
            range: [-130.0, -70.0],
            dtick: 5
          },
          lataxis: {
            showgrid: false,
            gridwidth: 0.5,
            range: [25.0, 50.0],
            dtick: 5
          },
        },

        title: 'Snowy Owl Movement by Month from 2014 to 2017',
        width: 700,
        height: 600
      };

      Plotly.newPlot('pointDiv', data, layout);
    });  
  </script>

  <script>
    Plotly.d3.csv('https://raw.githubusercontent.com/mailaw/data-vis-migration/master/data/snowyowlData10-13.csv', function (err, rows) {
      function unpack(rows, key) {
        return rows.map(function (row) { return row[key]; });
      }

      //scl = [[0, 'rgb(0, 25, 255)'],[0.25,'rgb(0, 152, 255)'],[0.5,'rgb(255, 0, 0)'],[0.75,'rgb(255,51,153)'],[1,'rgb(102,102,255)']];
      scl = [[0, 'rgb(85,133,181)'], [0.25, 'rgb(85,133,181)'], [0.5, 'rgb(227, 39, 63)'], [0.75, 'rgb(227, 39, 63)'], [1, 'rgb(85,133,181)']];
      console.log(unpack(rows, 'MONTH'));

      var data = [{
        type: 'scattergeo',
        mode: 'markers',
        text: unpack(rows, 'MONTH'),
        lon: unpack(rows, 'LONGITUDE'),
        lat: unpack(rows, 'LATITUDE'),
        marker: {
          color: unpack(rows, 'MONTH'),
          colorscale: scl,
          cmin: 1,
          cmax: 12,
          reversescale: true,
          opacity: 0.1,
          size: 5,
          colorbar: {
            thickness: 10,
            titleside: 'right',
            outlinecolor: 'rgba(68,68,68,0)',
            ticks: 'outside',
            ticklen: 3, //3
            shoticksuffix: 'last',
            ticksuffix: 'months',
            dtick: 1 //0.1
          }
        },
        name: 'Snowy Owl Data'
      }];

      var layout = {
        geo: {
          scope: 'north america',
          showland: true,
          landcolor: 'rgb(241,241,229)', //212,212,212
          subunitcolor: 'rgb(234,236,223)', //255,255,255
          countrycolor: 'rgb(255,255,255)',
          showlakes: true,
          lakecolor: 'rgb(216,231,231)', //255,255,255
          showsubunits: true,
          showcountries: true,
          resolution: 50,
          projection: {
            type: 'conic conformal',
            rotation: {
              long: -50
            }
          },
          lonaxis: {
            showgrid: false,
            gridwidth: 0.5,
            range: [-130.0, -70.0],
            dtick: 5
          },
          lataxis: {
            showgrid: false,
            gridwidth: 0.5,
            range: [25.0, 50.0],
            dtick: 5
          },
        },

        title: 'Snowy Owl Movement by Month from 2010 to 2013',
        width: 700,
        height: 600
      };

      Plotly.newPlot('pointDiv2', data, layout);
    });  
  </script>

</body>

</html>