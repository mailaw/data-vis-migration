<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <title>Bird Migration</title>
    <meta name="description" content="A3 Visualizer">
    <meta name="author" content="Mailiis Law">

    <!-- Bootstrap CSS stylesheet-->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous" rel="stylesheet">
    
    <!-- Custom styles -->
    <link href="css/styles.css" rel="stylesheet">  
    <link href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css" rel="stylesheet">
      
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
    <!--bootstrap js-->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
      
    <!--Table-->
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>  
    <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>

    <!-- Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <!-- Map>
    <script src="https://www.amcharts.com/lib/3/ammap.js"></script>
    <script src="https://www.amcharts.com/lib/3/maps/js/usaLow.js"></script>
    <script src="https://www.amcharts.com/lib/3/plugins/export/export.min.js"></script>
    <link rel="stylesheet" href="https://www.amcharts.com/lib/3/plugins/export/export.css" type="text/css" media="all" />
    <script src="https://www.amcharts.com/lib/3/themes/dark.js"></script>
    <script src="/js/map.js"></script-->
        

  </head>
  <body>
      <div class="row header-container" id="la-header"></div>
          <div class="article-body">
              <div class="row border-bottom">
                <h1>Bird migration patterns over the years reveal </h1>
              </div>
              <div id="bioline">
                By Mailiis Law
              </div>
              <div class="row article-text">
                <p>Snowy owls are among the largest birds in North America, but scientists know very little about their behavior. The owls spend most of their days far from humans, hunting rodents and birds in the flat expanses of the Arctic Circle. In the winter, the owls move south, but they don't usually reach the United States. Most years, only a few are spotted in the northernmost states — a rare treat for birders. But this winter was different.

                Owls started to appear all over the United States right around Thanksgiving — in Nebraska, in Kentucky — even as far south as Georgia. Dave Brinker, a biologist with the Maryland Department of Natural Resources, was shocked when he saw not one but two snowy owls on a small stretch of Maryland beach.

                "Something huge is going on," Brinker told his colleagues. "We won't see something like this for a long time — probably for the rest of our lifetimes."

                This rapid population boom — called an "irruption" by ecologists — is the largest the East Coast has seen in 40 or 50 years. </p>
              </div>
              <div class="row">
                <div class="col-md-3">
                   <div class="profile-container">
                        <h2>Snowy Owl</h2>
                        <h3>Bubo Scandiacus</h3>
                        <img src="assets/snowyProfile.jpg"> 
                        <p>Info about Snowy Owls</p>
                   </div>
                </div>
                <div class="col-md-9">
                    <!--div id="chartdiv"></div-->	
                    <!--div id="mapDiv"></div-->
                    <div id="pointDiv"></div>

                </div>
              </div>
              <div class="row">
                  <div class="col-md-12">
                    <div id="pointDiv2">
                    </div>
                  </div>
              </div>
              <div class="row">
                <div class="col-md-3">
                   <div id="bird-container">
                            <div class="row">
                                <div class="col-md-4">
                                    <img src="assets/birdp.jpg">
                                </div>
                                <div class="col-md-4">
                                    <img src="assets/birdp.jpg">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    <img src="assets/birdp.jpg">
                                </div>
                                <div class="col-md-4">
                                    <img src="assets/birdp.jpg">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    <img src="assets/birdp.jpg">
                                </div>
                                <div class="col-md-4">
                                    <img src="assets/birdp.jpg">
                                </div>
                            </div>
                        </div>  
                  </div>
              </div>

              
              <div class="row">
                  <div class="col-md-12">
                      <table id="snowyTable" class="display" cellspacing="0" width="100%">
                        <thead>
                            <tr>
                                <th>COMMON NAME</th>
                                <th>OBSERVATION COUNT</th>
                                <th>STATE</th>
                                <th>LATITUDE</th>
                                <th>LONGITUDE</th>
                                <th>OBSERVATION DATE</th>
                            </tr>
                        </thead>
                        <tfoot>
                            <tr>
                                <th>COMMON NAME</th>
                                <th>OBSERVATION COUNT</th>
                                <th>STATE</th>
                                <th>LATITUDE</th>
                                <th>LONGITUDE</th>
                                <th>OBSERVATION DATE</th>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
              
              
              
              <div class="row">
                  <div class="col-md-12">
                      <table id="example" class="display" cellspacing="0" width="100%">
                        <thead>
                            <tr>
                                <th>Common Name</th>
                                <th>Number</th>
                                <th>State</th>
                                <th>Date</th>
                            </tr>
                        </thead>
                        <tfoot>
                            <tr>
                                <th>Common Name</th>
                                <th>Number</th>
                                <th>State</th>
                                <th>Date</th>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>
    <!--scripts at bottom to load faster-->
    <script src="js/scripts.js"></script>
      

      
    <!--map heat -->
    <script>
      
        Plotly.d3.csv('https://github.com/mailaw/data-vis-migration/blob/master/data/pabuTotals10-11.csv', function(err, rows){
          function unpack(rows, key) {
              return rows.map(function(row) { return row[key]; });
          }

        var data = [{
                  type: 'choropleth',
                  locationmode: 'USA-states',
                  locations: unpack(rows, 'CODE'),
                  z: unpack(rows, 'TOTAL'),
                  text: unpack(rows, 'state'),
                  zmin: 0,
                  zmax: 17000,
                  colorscale: [
                    [0, 'rgb(242,240,247)'], [0.2, 'rgb(218,218,235)'],
                    [0.4, 'rgb(188,189,220)'], [0.6, 'rgb(158,154,200)'],
                    [0.8, 'rgb(117,107,177)'], [1, 'rgb(84,39,143)']
                  ],
                colorbar: {
                  title: 'Millions USD',
                  thickness: 0.2
                },
                marker: {
                  line:{
                    color: 'rgb(255,255,255)',
                    width: 2
                  }
                }
              }];

        console.log(data.locations);
          var layout = {
                  title: '2011 US Agriculture Exports by State',
                  geo:{
                    scope: 'usa',
                    showlakes: true,
                    lakecolor: 'rgb(255,255,255)'
                  }
              };
              Plotly.plot(myDiv, data, layout, {showLink: false});
          });
    </script>
      
    <script>
        Plotly.d3.csv('https://raw.githubusercontent.com/mailaw/data-vis-migration/master/data/snowyowlData.csv', function(err, rows){
          function unpack(rows, key) {
            return rows.map(function(row) { return row[key]; });}

          function getMaxOfArray(numArray) {
            return Math.max.apply(null, numArray);
          }

           var data = [];
           var count = unpack(rows, 'OBSERVATION COUNT');
           var startLongitude = unpack(rows, 'LATITUDE');
           var endLongitude = unpack(rows, 'LONGITUDE');
           var startLat = unpack(rows, 'start_lat');
           var endLat = unpack(rows, 'end_lat');

           for ( var i = 0 ; i < count.length; i++ ) {
             var opacityValue = count[i]/getMaxOfArray(count);
             var result2 = {
              type: 'scattergeo',
              locationmode: 'USA-states',
              lon: [ startLongitude[i] , endLongitude[i] ],
              lat: [ startLat[i] , endLat[i] ],
              mode: 'lines',
              line: {
                width: 1,
                color: 'red'
              },
            opacity: opacityValue
            };
            data.push(result2);

           };

        var layout = {
              title: 'Feb. 2011 American Airline flight paths',
              showlegend: false,
              geo:{
                scope: 'north america',
                projection: {
                  type: 'azimuthal equal area'
                },
                showland: true,
                landcolor: 'rgb(243,243,243)',
                countrycolor: 'rgb(204,204,204)'
              }
            };

        Plotly.plot(mapDiv, data, layout, {showLink: false});
        });
    </script>
      
      
    <!--point map-->
    <script>
      Plotly.d3.csv('https://raw.githubusercontent.com/mailaw/data-vis-migration/master/data/snowyowlData14-17.csv', function(err, rows){
      function unpack(rows, key) {
          return rows.map(function(row) { return row[key]; });
      }

    //scl = [[0, 'rgb(0, 25, 255)'],[0.25,'rgb(0, 152, 255)'],[0.5,'rgb(255, 0, 0)'],[0.75,'rgb(255,51,153)'],[1,'rgb(102,102,255)']];
      scl = [[0, 'rgb(85,133,181)'],[0.25,'rgb(85,133,181)'],[0.5,'rgb(227, 39, 63)'],[0.75,'rgb(227, 39, 63)'],[1,'rgb(85,133,181)']];
      console.log(unpack(rows, 'MONTH'));

        var data = [{
            type: 'scattergeo',
            mode: 'markers',
            text: unpack(rows, 'MONTH'),
            lon: unpack(rows, 'LONGITUDE'),
            lat: unpack(rows, 'LATITUDE'),
            marker: {
              color: unpack(rows, 'MONTH'),
              colorscale: scl,
              cmin: 1,
              cmax: 12,
              reversescale: true,
              opacity: 0.1,
              size: 5,
              colorbar:{
                thickness: 10,
                titleside: 'right',
                outlinecolor: 'rgba(68,68,68,0)',
                ticks: 'outside',
                ticklen: 3, //3
                shoticksuffix: 'last',
                ticksuffix: 'months',
                dtick: 1 //0.1
              }
            },
            name: 'Snowy Owl Data'
        }];

        var layout = {
          geo:{
            scope: 'north america',
            showland: true,
            landcolor: 'rgb(241,241,229)', //212,212,212
            subunitcolor: 'rgb(234,236,223)', //255,255,255
            countrycolor: 'rgb(255,255,255)',
            showlakes: true,
            lakecolor: 'rgb(216,231,231)', //255,255,255
            showsubunits: true,
            showcountries: true,
            resolution: 50,
            projection: {
              type: 'conic conformal',
              rotation: {
                long: -50
              }
            },
            lonaxis: {
              showgrid: false,
              gridwidth: 0.5,
              range: [ -130.0, -70.0 ],
              dtick: 5
            },
            lataxis: {
              showgrid: false,
              gridwidth: 0.5,
              range: [ 25.0, 50.0 ],
              dtick: 5
            },
          },

          title: 'Snowy Owl Distribution from 2014 to 2017',
          width: 900,
          height: 600
        };
          
        Plotly.newPlot('pointDiv', data, layout);
      });  
    </script>
      
    <script>
      Plotly.d3.csv('https://raw.githubusercontent.com/mailaw/data-vis-migration/master/data/snowyowlData10-13.csv', function(err, rows){
      function unpack(rows, key) {
          return rows.map(function(row) { return row[key]; });
      }

    //scl = [[0, 'rgb(0, 25, 255)'],[0.25,'rgb(0, 152, 255)'],[0.5,'rgb(255, 0, 0)'],[0.75,'rgb(255,51,153)'],[1,'rgb(102,102,255)']];
      scl = [[0, 'rgb(85,133,181)'],[0.25,'rgb(85,133,181)'],[0.5,'rgb(227, 39, 63)'],[0.75,'rgb(227, 39, 63)'],[1,'rgb(85,133,181)']];
      console.log(unpack(rows, 'MONTH'));

        var data = [{
            type: 'scattergeo',
            mode: 'markers',
            text: unpack(rows, 'MONTH'),
            lon: unpack(rows, 'LONGITUDE'),
            lat: unpack(rows, 'LATITUDE'),
            marker: {
              color: unpack(rows, 'MONTH'),
              colorscale: scl,
              cmin: 1,
              cmax: 12,
              reversescale: true,
              opacity: 0.1,
              size: 5,
              colorbar:{
                thickness: 10,
                titleside: 'right',
                outlinecolor: 'rgba(68,68,68,0)',
                ticks: 'outside',
                ticklen: 3, //3
                shoticksuffix: 'last',
                ticksuffix: 'months',
                dtick: 1 //0.1
              }
            },
            name: 'Snowy Owl Data'
        }];

        var layout = {
          geo:{
            scope: 'north america',
            showland: true,
            landcolor: 'rgb(241,241,229)', //212,212,212
            subunitcolor: 'rgb(234,236,223)', //255,255,255
            countrycolor: 'rgb(255,255,255)',
            showlakes: true,
            lakecolor: 'rgb(216,231,231)', //255,255,255
            showsubunits: true,
            showcountries: true,
            resolution: 50,
            projection: {
              type: 'conic conformal',
              rotation: {
                long: -50
              }
            },
            lonaxis: {
              showgrid: false,
              gridwidth: 0.5,
              range: [ -130.0, -70.0 ],
              dtick: 5
            },
            lataxis: {
              showgrid: false,
              gridwidth: 0.5,
              range: [ 25.0, 50.0 ],
              dtick: 5
            },
          },

          title: 'Snowy Owl Distribution from 2010 to 2013',
          width: 900,
          height: 600
        };
          
        Plotly.newPlot('pointDiv2', data, layout);
      });  
    </script>
          
  </body>
</html>